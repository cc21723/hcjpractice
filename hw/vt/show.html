<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VT 30年股票資料</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.8/css/bootstrap.min.css"
        integrity="sha512-2bBQCjcnw658Lho4nlXJcc6WkV/UxpE/sAokbXPxQNGqmNdQrWqtw26Ns9kFF/yG792pKR1Sx8/Y1Lf1XN4GKA=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
</head>
<body>
    <div class="container mt-3">
        <h2>投資一定有風險 資料只是參考練習</h2>
        <p>
            VT 全球股票基金 歷史資料
            平均年化投報率: <span id="roi">--%</span>
        </p>
        <table class="table table-bordered">
            <thead>
                <tr>
                    <th>項目</th>
                    <th>年分</th>
                    <th>每年收盤價</th>
                    <th>每年投報率</th>
                </tr>
            </thead>
            <tbody id="myTbody"></tbody>
        </table>
    </div>

    <!-- 載入BS5與jQuery -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.8/js/bootstrap.min.js"
        crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js"
        crossorigin="anonymous"></script>

<script>
$(document).ready(function () {
    const myTbody = $('#myTbody');
    const roi = $('#roi');

    let url = "./vt_last_trading_day_30y.json"; // ✅ 改成VT的JSON
    $.ajax({
        type: "get",
        url: url,
        dataType: "json",
        success: function (res) {
            let data = res.data;
            let tmpText = ``;
            let totalReturn = 0;

            $.each(data, function (key, value) {
                tmpText += `
                <tr>
                    <td>${key + 1}</td>
                    <td>${value.year}</td>
                    <td>${value.close}</td>
                    <td>${value.return_close}</td>
                </tr>`;
                totalReturn += parseFloat(value.return_close.replace('%', '')) || 0;
            });

            myTbody.append(tmpText);
            let avgReturn = (totalReturn / data.length).toFixed(2);
            roi.text(avgReturn + "%");
        }
    });
});
</script>
</body>
</html>
