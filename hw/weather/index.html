<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å¤©æ°£ä¹‹å­é¢¨æ ¼å¤©æ°£é å ±</title>
    <!-- è¼‰å…¥bs5 css -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.7/css/bootstrap.min.css"
        integrity="sha512-fw7f+TcMjTb7bpbLJZlP8g2Y4XcCyFZW8uy8HsRZsH/SwbMw0plKHFHr99DN3l04VsYNwvzicUX/6qurvIxbxw=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />

    <style>
        body {
            font-family: 'Segoe UI', sans-serif;
            background: linear-gradient(to bottom, #a0cfff, #e6f5ff);
            background-attachment: fixed;
            min-height: 100vh;
            padding: 40px;
            overflow-x: hidden;
        }

        /* é›²å±¤ */
        .cloud-layer {
            position: fixed;
            top: 0;
            left: 0;
            width: 300%;
            height: 100%;
            background-repeat: repeat-x;
            background-size: 800px auto;
            pointer-events: none;
            z-index: -1;
        }

        .clouds-back {
            background-image: url('https://pngimg.com/d/cloud_PNG112234.png');
            opacity: 0.4;
            animation: moveCloudsBack 120s linear infinite;
        }

        .clouds-mid {
            background-image: url('https://pngimg.com/uploads/cloud/cloud_PNG6.png');
            opacity: 0.6;
            animation: moveCloudsMid 80s linear infinite;
        }

        .clouds-front {
            background-image: url('https://pngimg.com/uploads/cloud/cloud_PNG4.png');
            opacity: 0.9;
            animation: moveCloudsFront 50s linear infinite;
        }

        @keyframes moveCloudsBack {
            from {
                transform: translateX(0);
            }

            to {
                transform: translateX(-50%);
            }
        }

        @keyframes moveCloudsMid {
            from {
                transform: translateX(0);
            }

            to {
                transform: translateX(-50%);
            }
        }

        @keyframes moveCloudsFront {
            from {
                transform: translateX(0);
            }

            to {
                transform: translateX(-50%);
            }
        }

        /* æ¨™é¡Œ */
        h3 {
            text-align: center;
            font-weight: bold;
            color: #1a4f8b;
            text-shadow: 0 0 10px rgba(255, 255, 255, 0.9), 0 0 20px rgba(173, 216, 230, 0.6);
            margin-bottom: 30px;
            font-size: 2rem;
        }

        /* å¤©æ°£ä¹‹å­é¢¨æ ¼è¡¨æ ¼ */
        table {
            width: 90%;
            margin: auto;
            border-collapse: separate;
            border-spacing: 0;
            background: rgba(255, 255, 255, 0.25);
            backdrop-filter: blur(15px);
            border-radius: 20px;
            overflow: hidden;
            box-shadow: 0 8px 30px rgba(0, 0, 0, 0.1);
        }

        thead {
            background: linear-gradient(to right, #6fb1fc, #1f78d1);
            color: #fff;
            font-weight: bold;
            text-align: center;
        }

        thead th {
            padding: 15px 10px;
            font-size: 1.1rem;
            text-shadow: 0 0 5px rgba(255, 255, 255, 0.5);
        }

        tbody td {
            padding: 14px 10px;
            text-align: center;
            color: #1a4f8b;
            font-weight: 500;
            border-bottom: 1px solid rgba(255, 255, 255, 0.3);
            transition: all 0.3s ease;
        }

        tbody tr:hover td {
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(8px);
            color: #e16b8c;
            transform: scale(1.02);
        }

        /* ç·¨è™Ÿæ¬„ç‰¹æ®Šæ¨£å¼ */
        tbody td:first-child {
            font-weight: bold;
            color: #ffb347;
        }

        /* å¤©æ°£ç¾è±¡æ¬„åŠ å‹•æ…‹ Emoji */
        tbody td:nth-child(3)::before {
            content: attr(data-emoji) " ";
            margin-right: 4px;
        }

        /* é™é›¨æ©Ÿç‡æ¬„åŠ æ°´æ»´ Emoji */
        tbody td:nth-child(4)::after {
            content: " ğŸ’§";
            margin-left: 4px;
        }

        /* æº«åº¦æ¬„åŠ å¤ªé™½ / æº«åº¦ Emoji */
        tbody td:nth-child(5)::after,
        tbody td:nth-child(6)::after {
            content: " ğŸŒ¡ï¸";
            margin-left: 4px;
        }

        /* èˆ’é©åº¦æ¬„åŠ å½©è™¹ */
        tbody td:nth-child(7)::before {
            content: "ğŸŒˆ ";
            margin-right: 4px;
        }


        /* æ‰‹æ©ŸéŸ¿æ‡‰å¼ */
        @media (max-width: 768px) {

            table,
            thead,
            tbody,
            th,
            td,
            tr {
                display: block;
            }

            thead {
                display: none;
            }

            tbody td {
                text-align: right;
                padding-left: 50%;
                position: relative;
            }

            tbody td::before {
                content: attr(data-label);
                position: absolute;
                left: 15px;
                width: calc(50% - 30px);
                white-space: nowrap;
                font-weight: bold;
            }
        }
    </style>

</head>

<body>
    <!-- ä¸‰å±¤é›² -->
    <div class="cloud-layer clouds-back"></div>
    <div class="cloud-layer clouds-mid"></div>
    <div class="cloud-layer clouds-front"></div>

    <h3>â˜€ï¸ ä¸‰åå…­å°æ™‚å¤©æ°£é å ±</h3>

    <table id="myTable" class="display">
        <thead>
            <tr>
                <th>ç·¨è™Ÿ</th>
                <th>åœ°é»</th>
                <th>å¤©æ°£ç¾è±¡</th>
                <th>é™é›¨æ©Ÿç‡</th>
                <th>æœ€ä½æº«åº¦</th>
                <th>æœ€é«˜æº«åº¦</th>
                <th>èˆ’é©åº¦</th>
            </tr>
        </thead>
        <tbody class="tbody"></tbody>
    </table>

    <!-- è¼‰å…¥bs5 js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.7/js/bootstrap.bundle.min.js"
        integrity="sha512-Tc0i+vRogmX4NN7tuLbQfBxa8JkfUSAxSFVzmU31nVdHyiHElPPy2cWfFacmCJKw0VqovrzKhdd2TSTMdAxp2g=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" crossorigin="anonymous"
        referrerpolicy="no-referrer"></script>

    <!-- è¼‰å…¥pwd -->
    <!-- .gitignore -->
    <!-- /pw -->
    <!-- /pw/pw.js -->
    <!-- let pw = 'your password' -->
    <script src="../../pw/pw.js"></script>
    <script>
        $(document).ready(function () {

            let pwd = pw;
            // console.log('pwd', pwd);


            let url = `https://opendata.cwa.gov.tw/api/v1/rest/datastore/F-C0032-001?Authorization=${pwd}`;
            $.ajax({
                type: "get",
                url: url,
                dataType: "json",
                success: function (res) {
                    console.log(res);

                    const tbody = $('.tbody');
                    const locations = res.records.location;

                    locations.forEach(function (value, index) {
                        let wxText = value.weatherElement[0].time[0].parameter.parameterName;
                        let wxEmoji = "â˜ï¸"; // é è¨­
                        if (wxText.includes("æ™´æ™‚å¤šé›²")) wxEmoji = "â˜€ï¸ â›…";
                        else if (wxText.includes("å¤šé›²æ™‚æ™´")) wxEmoji = "â›…";
                        // else if (wxText.includes("é›¨")) wxEmoji = "ğŸŒ§ï¸";
                        else if (wxText.includes("æ™´åˆå¾ŒçŸ­æš«é›·é™£é›¨")) wxEmoji = "â˜€ï¸ â›ˆï¸";

                        let pop = value.weatherElement[1].time[0].parameter.parameterName + '%';
                        let mint = value.weatherElement[2].time[0].parameter.parameterName + 'Â°C';
                        let maxt = value.weatherElement[4].time[0].parameter.parameterName + 'Â°C';
                        let ci = value.weatherElement[3].time[0].parameter.parameterName;

                        let tmpText = `
                            <tr>
                                <td data-label="ç·¨è™Ÿ">${index + 1}</td>
                                <td data-label="åŸå¸‚">${value.locationName}</td>
                                <td data-label="å¤©æ°£" data-emoji="${wxEmoji}">${wxText}</td>
                                <td data-label="é™é›¨æ©Ÿç‡">${pop}</td>
                                <td data-label="æœ€ä½æº«åº¦">${mint}</td>
                                <td data-label="æœ€é«˜æº«åº¦">${maxt}</td>
                                <td data-label="">${ci}</td>
                            </tr>
                        `;
                        tbody.append(tmpText);
                    });
                }
            });
        });

    </script>
</body>

</html>